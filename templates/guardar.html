from bs4 import BeautifulSoup
import requests

def analizar_producto(producto):
    url = f"https://listado.mercadolibre.com.ar/{producto}"
    response = requests.get(url)
    
    if response.status_code != 200:
        return {"error": "No se pudo acceder a la página"}
    
    soup = BeautifulSoup(response.text, 'html.parser')
    
    # Buscar el total de publicaciones
    total_publicaciones = soup.find('span', {'class': 'ui-search-search-result__quantity-results'})
    if total_publicaciones:
        total = int(total_publicaciones.text.split()[0].replace('.', ''))
        
        # Definir criterio de recomendación
        if total > 500:
            recomendacion = "Alta competencia. No se recomienda vender este producto."
        elif total > 100:
            recomendacion = "Competencia moderada. Considera venderlo con un enfoque único."
        else:
            recomendacion = "Buena oportunidad. Poca competencia en el mercado."
        
        return {
            "producto": producto,
            "total_publicaciones": total,
            "recomendacion": recomendacion
        }
    else:
        return {"producto": producto, "total_publicaciones": 0, "recomendacion": "No se encontraron publicaciones."}
    
if __name__ == "__main__":
    producto = input("Ingresa el producto a analizar: ")
    resultado = analizar_producto(producto)
    print(f"Producto: {resultado['producto']}")
    print(f"Total de publicaciones: {resultado['total_publicaciones']}")
    print(f"Recomendación: {resultado['recomendacion']}")